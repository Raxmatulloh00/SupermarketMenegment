@page "/piedesign"
@inject IViewProductsUseCase RecordTransactionUseCase
@using AntDesign.Charts
@using Title = AntDesign.Charts.Title

<Pie Data="data" Config="config1" />


@code {

    List<Product> products = new List<Product>();
    List<string> names = new List<string>();
    List<int?> soldqty = new List<int?>();
    List<object> data = new List<object>();

    protected override void OnInitialized()
    {
        products = RecordTransactionUseCase.Execute().ToList();

        foreach (var item in products)
        {
            names.Add(item.Name);
            soldqty.Add(item.Quantity);
            data.Add(new ObjPie
                {
                    type = item.Name,
                    value = item.Quantity
                });
        };
    }

    public class ObjPie
    {
        public string type { get; set; }
        public int? value { get; set; }
    }

    readonly PieConfig config1 = new PieConfig
        {
            ForceFit = true,
            Title = new Title
            {
                Visible = true,
                Text = "Multicolor Pie Chart"
            },
            Description = new Description
            {
                Visible = true,
                Text = "Specify the color mapping field (colorField), and the pie slice will be displayed in different colors according to the field data. To specify the color, you need to configure the color as an array. \nWhen the pie chart label type is set to inner, the label will be displayed inside the slice. Set the offset value of the offset control label."
            },   
            Radius = 0.9,
            AngleField = "value",
            ColorField = "type",
            Label = new PieLabelConfig
            {
                Visible = true,
                Type = "inner"
            }
        };
}
